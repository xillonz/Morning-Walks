{"id":"kdjR","dependencies":[{"name":"C:\\Users\\Hoops\\Websites\\Morning Walks\\vue\\Morning-Walks\\package.json","includedInParent":true,"mtime":1603002757582},{"name":"vue-recaptcha","loc":{"line":25,"column":25},"parent":"C:\\Users\\Hoops\\Websites\\Morning Walks\\vue\\Morning-Walks\\components\\CommentList.vue","resolved":"C:\\Users\\Hoops\\Websites\\Morning Walks\\vue\\Morning-Walks\\node_modules\\vue-recaptcha\\dist\\vue-recaptcha.es.js"},{"name":"~/components/Date","loc":{"line":26,"column":17},"parent":"C:\\Users\\Hoops\\Websites\\Morning Walks\\vue\\Morning-Walks\\components\\CommentList.vue","resolved":"C:\\Users\\Hoops\\Websites\\Morning Walks\\vue\\Morning-Walks\\components\\Date.vue"},{"name":"graphql-tag","loc":{"line":27,"column":16},"parent":"C:\\Users\\Hoops\\Websites\\Morning Walks\\vue\\Morning-Walks\\components\\CommentList.vue","resolved":"C:\\Users\\Hoops\\Websites\\Morning Walks\\vue\\Morning-Walks\\node_modules\\graphql-tag\\src\\index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=s(require(\"vue-recaptcha\")),t=s(require(\"~/components/Date\")),n=s(require(\"graphql-tag\"));function s(e){return e&&e.__esModule?e:{default:e}}function a(){var e=m([\"mutation ($name: String!, $message: String!, $slug: String!) {\\n                    createComment(data: {message: $message, name: $name, post: {connect: {slug: $slug}}}) {\\n                        id\\n                        name\\n                        message\\n                        createdAt\\n                    }\\n                }\"]);return a=function(){return e},e}function r(){var e=m([\"query ($slug: String!){\\n                comments(orderBy: createdAt_DESC, where: {post: {slug: $slug}}, stage: DRAFT) {\\n                    message\\n                    name\\n                    createdAt\\n                },            \\n            }\"]);return r=function(){return e},e}function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o={components:{Date:t.default,VueRecaptcha:e.default},data:function(){return{newComments:[],name:\"\",message:\"\",error:!1,human:!1}},props:[\"slug\"],computed:{allComments:function(){return this.comments?this.newComments.concat(this.comments):this.newComments}},apollo:{comments:{query:(0,n.default)(r()),variables:function(){return{slug:this.slug}}}},methods:{addComment:function(){var e=this;if(this.error=!this.name||!this.message,!this.error&&this.human){var t=this.name,s=this.message,r=(new window.Date).toISOString(),m=this.slug;this.name=\"\",this.message=\"\",this.$apollo.mutate({mutation:(0,n.default)(a()),variables:{name:t,message:s,slug:m},update:function(t,n){var s=n.data.createComment;-1===s.id&&e.newComments.unshift({name:s.name,message:s.message,createdAt:s.createdAt})},optimisticResponse:{__typename:\"Mutation\",createComment:{__typename:\"Comment\",id:-1,name:t,message:s,createdAt:r}}}).then(function(e){console.log(e)}).catch(function(n){console.error(n),e.name=t,e.message=s,e.newComments.shift()})}}}};exports.default=o;\n(function(){var e=exports.default||module.exports;\"function\"==typeof e&&(e=e.options),Object.assign(e,{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"comment-list container\"},[a(\"p\",[e._v(\"Leave a comment:\")]),e._v(\" \"),a(\"form\",{on:{submit:function(t){return t.preventDefault(),e.addComment(t)}}},[a(\"label\",{attrs:{for:\"comment-name\"}},[e._v(\"Name\")]),e._v(\" \"),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.name,expression:\"name\"}],attrs:{id:\"comment-name\",type:\"text\",placeholder:\"Name\"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(\" \"),a(\"label\",{attrs:{for:\"comment-message\"}},[e._v(\"Message\")]),e._v(\" \"),a(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.message,expression:\"message\"}],attrs:{name:\"message\",id:\"comment-message\",cols:\"30\",rows:\"10\",placeholder:\"Message\"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(\" \"),e.error?a(\"p\",[e._v(\"Please enter your name and message\")]):e._e(),e._v(\" \"),a(\"vue-recaptcha\",{staticClass:\"recaptcha\",attrs:{sitekey:\"6LeMHNcZAAAAALVnQ5cakOMslTFB-0phmVAAQg-9\"},on:{verify:function(t){e.human=!0}}}),e._v(\" \"),a(\"input\",{staticClass:\"btn\",attrs:{type:\"submit\",value:\"Add Comment\"}})],1),e._v(\" \"),a(\"ul\",e._l(e.allComments,function(t){return a(\"li\",{staticClass:\"comment\"},[a(\"p\",{staticClass:\"comment-name\"},[e._v(e._s(t.name))]),e._v(\" \"),a(\"date\",{staticClass:\"comment-date\",attrs:{date:t.createdAt}}),e._v(\" \"),a(\"p\",[e._v(e._s(t.message))])],1)}),0)])},staticRenderFns:[],_compiled:!0,_scopeId:null,functional:void 0});})();"},"sourceMaps":{"js":{"mappings":[{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":0}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":13}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":20}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":35}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":43}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":56}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":57}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":64}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":68}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":76}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":89}},{"source":"components/CommentList.vue","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":91}},{"source":"components/CommentList.vue","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":95}},{"source":"components/CommentList.vue","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":97}},{"source":"components/CommentList.vue","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":99}},{"source":"components/CommentList.vue","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":107}},{"source":"components/CommentList.vue","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":125}},{"source":"components/CommentList.vue","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":127}},{"source":"components/CommentList.vue","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":129}},{"source":"components/CommentList.vue","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":137}},{"source":"components/CommentList.vue","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":159}},{"source":"components/CommentList.vue","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":161}},{"source":"components/CommentList.vue","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":163}},{"source":"components/CommentList.vue","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":171}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":187}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":196}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":198}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":201}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":208}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":211}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":213}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":224}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":226}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":227}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":235}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":238}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":247}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":251}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":255}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":257}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":259}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":260}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":604}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":611}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":613}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":624}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":631}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":634}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":636}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":645}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":649}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":653}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":655}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":657}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":658}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":916}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":923}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":925}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":936}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":943}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":946}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":948}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":957}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":959}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":961}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":964}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":971}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":975}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":977}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":979}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":985}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":989}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":996}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1003}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1010}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1027}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1029}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1030}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1034}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1035}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1041}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1048}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1055}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1062}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1066}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":1068}},{"source":"components/CommentList.vue","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1069}},{"source":"components/CommentList.vue","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1080}},{"source":"components/CommentList.vue","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1081}},{"source":"components/CommentList.vue","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1086}},{"source":"components/CommentList.vue","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1088}},{"source":"components/CommentList.vue","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1096}},{"source":"components/CommentList.vue","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1109}},{"source":"components/CommentList.vue","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1111}},{"source":"components/CommentList.vue","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":1120}},{"source":"components/CommentList.vue","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":1125}},{"source":"components/CommentList.vue","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":1136}},{"source":"components/CommentList.vue","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":1142}},{"source":"components/CommentList.vue","name":null,"original":{"line":33,"column":0},"generated":{"line":1,"column":1143}},{"source":"components/CommentList.vue","name":null,"original":{"line":33,"column":0},"generated":{"line":1,"column":1155}},{"source":"components/CommentList.vue","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":1158}},{"source":"components/CommentList.vue","name":null,"original":{"line":34,"column":0},"generated":{"line":1,"column":1163}},{"source":"components/CommentList.vue","name":null,"original":{"line":35,"column":0},"generated":{"line":1,"column":1166}},{"source":"components/CommentList.vue","name":null,"original":{"line":35,"column":0},"generated":{"line":1,"column":1174}},{"source":"components/CommentList.vue","name":null,"original":{"line":36,"column":0},"generated":{"line":1,"column":1177}},{"source":"components/CommentList.vue","name":null,"original":{"line":36,"column":0},"generated":{"line":1,"column":1184}},{"source":"components/CommentList.vue","name":null,"original":{"line":37,"column":0},"generated":{"line":1,"column":1186}},{"source":"components/CommentList.vue","name":null,"original":{"line":37,"column":0},"generated":{"line":1,"column":1193}},{"source":"components/CommentList.vue","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":1197}},{"source":"components/CommentList.vue","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":1203}},{"source":"components/CommentList.vue","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":1204}},{"source":"components/CommentList.vue","name":null,"original":{"line":41,"column":0},"generated":{"line":1,"column":1212}},{"source":"components/CommentList.vue","name":null,"original":{"line":41,"column":0},"generated":{"line":1,"column":1221}},{"source":"components/CommentList.vue","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":1222}},{"source":"components/CommentList.vue","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":1234}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1245}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1252}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1257}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1266}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1271}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1283}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1290}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1295}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1305}},{"source":"components/CommentList.vue","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":1310}},{"source":"components/CommentList.vue","name":null,"original":{"line":46,"column":0},"generated":{"line":1,"column":1324}},{"source":"components/CommentList.vue","name":null,"original":{"line":46,"column":0},"generated":{"line":1,"column":1331}},{"source":"components/CommentList.vue","name":null,"original":{"line":47,"column":0},"generated":{"line":1,"column":1332}},{"source":"components/CommentList.vue","name":null,"original":{"line":47,"column":0},"generated":{"line":1,"column":1341}},{"source":"components/CommentList.vue","name":null,"original":{"line":48,"column":0},"generated":{"line":1,"column":1342}},{"source":"components/CommentList.vue","name":null,"original":{"line":48,"column":0},"generated":{"line":1,"column":1349}},{"source":"components/CommentList.vue","name":null,"original":{"line":48,"column":0},"generated":{"line":1,"column":1351}},{"source":"components/CommentList.vue","name":null,"original":{"line":48,"column":0},"generated":{"line":1,"column":1353}},{"source":"components/CommentList.vue","name":null,"original":{"line":47,"column":0},"generated":{"line":1,"column":1362}},{"source":"components/CommentList.vue","name":null,"original":{"line":55,"column":0},"generated":{"line":1,"column":1367}},{"source":"components/CommentList.vue","name":null,"original":{"line":55,"column":0},"generated":{"line":1,"column":1377}},{"source":"components/CommentList.vue","name":null,"original":{"line":56,"column":0},"generated":{"line":1,"column":1388}},{"source":"components/CommentList.vue","name":null,"original":{"line":56,"column":0},"generated":{"line":1,"column":1394}},{"source":"components/CommentList.vue","name":null,"original":{"line":57,"column":0},"generated":{"line":1,"column":1395}},{"source":"components/CommentList.vue","name":null,"original":{"line":57,"column":0},"generated":{"line":1,"column":1400}},{"source":"components/CommentList.vue","name":null,"original":{"line":57,"column":0},"generated":{"line":1,"column":1405}},{"source":"components/CommentList.vue","name":null,"original":{"line":63,"column":0},"generated":{"line":1,"column":1414}},{"source":"components/CommentList.vue","name":null,"original":{"line":63,"column":0},"generated":{"line":1,"column":1422}},{"source":"components/CommentList.vue","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1423}},{"source":"components/CommentList.vue","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1434}},{"source":"components/CommentList.vue","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1445}},{"source":"components/CommentList.vue","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1449}},{"source":"components/CommentList.vue","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1451}},{"source":"components/CommentList.vue","name":null,"original":{"line":68,"column":0},"generated":{"line":1,"column":1456}},{"source":"components/CommentList.vue","name":null,"original":{"line":66,"column":0},"generated":{"line":1,"column":1459}},{"source":"components/CommentList.vue","name":null,"original":{"line":66,"column":0},"generated":{"line":1,"column":1464}},{"source":"components/CommentList.vue","name":null,"original":{"line":66,"column":0},"generated":{"line":1,"column":1471}},{"source":"components/CommentList.vue","name":null,"original":{"line":66,"column":0},"generated":{"line":1,"column":1476}},{"source":"components/CommentList.vue","name":null,"original":{"line":66,"column":0},"generated":{"line":1,"column":1483}},{"source":"components/CommentList.vue","name":null,"original":{"line":66,"column":0},"generated":{"line":1,"column":1488}},{"source":"components/CommentList.vue","name":null,"original":{"line":68,"column":0},"generated":{"line":1,"column":1497}},{"source":"components/CommentList.vue","name":null,"original":{"line":68,"column":0},"generated":{"line":1,"column":1502}},{"source":"components/CommentList.vue","name":null,"original":{"line":68,"column":0},"generated":{"line":1,"column":1509}},{"source":"components/CommentList.vue","name":null,"original":{"line":68,"column":0},"generated":{"line":1,"column":1514}},{"source":"components/CommentList.vue","name":null,"original":{"line":68,"column":0},"generated":{"line":1,"column":1520}},{"source":"components/CommentList.vue","name":null,"original":{"line":70,"column":0},"generated":{"line":1,"column":1521}},{"source":"components/CommentList.vue","name":null,"original":{"line":70,"column":0},"generated":{"line":1,"column":1525}},{"source":"components/CommentList.vue","name":null,"original":{"line":70,"column":0},"generated":{"line":1,"column":1527}},{"source":"components/CommentList.vue","name":null,"original":{"line":70,"column":0},"generated":{"line":1,"column":1532}},{"source":"components/CommentList.vue","name":null,"original":{"line":71,"column":0},"generated":{"line":1,"column":1537}},{"source":"components/CommentList.vue","name":null,"original":{"line":71,"column":0},"generated":{"line":1,"column":1539}},{"source":"components/CommentList.vue","name":null,"original":{"line":71,"column":0},"generated":{"line":1,"column":1544}},{"source":"components/CommentList.vue","name":null,"original":{"line":72,"column":0},"generated":{"line":1,"column":1552}},{"source":"components/CommentList.vue","name":null,"original":{"line":72,"column":0},"generated":{"line":1,"column":1555}},{"source":"components/CommentList.vue","name":null,"original":{"line":72,"column":0},"generated":{"line":1,"column":1559}},{"source":"components/CommentList.vue","name":null,"original":{"line":72,"column":0},"generated":{"line":1,"column":1566}},{"source":"components/CommentList.vue","name":null,"original":{"line":72,"column":0},"generated":{"line":1,"column":1572}},{"source":"components/CommentList.vue","name":null,"original":{"line":73,"column":0},"generated":{"line":1,"column":1586}},{"source":"components/CommentList.vue","name":null,"original":{"line":73,"column":0},"generated":{"line":1,"column":1588}},{"source":"components/CommentList.vue","name":null,"original":{"line":73,"column":0},"generated":{"line":1,"column":1593}},{"source":"components/CommentList.vue","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":1598}},{"source":"components/CommentList.vue","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":1603}},{"source":"components/CommentList.vue","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":1608}},{"source":"components/CommentList.vue","name":null,"original":{"line":75,"column":0},"generated":{"line":1,"column":1611}},{"source":"components/CommentList.vue","name":null,"original":{"line":75,"column":0},"generated":{"line":1,"column":1616}},{"source":"components/CommentList.vue","name":null,"original":{"line":75,"column":0},"generated":{"line":1,"column":1624}},{"source":"components/CommentList.vue","name":null,"original":{"line":77,"column":0},"generated":{"line":1,"column":1627}},{"source":"components/CommentList.vue","name":null,"original":{"line":77,"column":0},"generated":{"line":1,"column":1632}},{"source":"components/CommentList.vue","name":null,"original":{"line":77,"column":0},"generated":{"line":1,"column":1640}},{"source":"components/CommentList.vue","name":null,"original":{"line":77,"column":0},"generated":{"line":1,"column":1647}},{"source":"components/CommentList.vue","name":null,"original":{"line":79,"column":0},"generated":{"line":1,"column":1648}},{"source":"components/CommentList.vue","name":null,"original":{"line":79,"column":0},"generated":{"line":1,"column":1658}},{"source":"components/CommentList.vue","name":null,"original":{"line":79,"column":0},"generated":{"line":1,"column":1660}},{"source":"components/CommentList.vue","name":null,"original":{"line":79,"column":0},"generated":{"line":1,"column":1662}},{"source":"components/CommentList.vue","name":null,"original":{"line":77,"column":0},"generated":{"line":1,"column":1671}},{"source":"components/CommentList.vue","name":null,"original":{"line":88,"column":0},"generated":{"line":1,"column":1676}},{"source":"components/CommentList.vue","name":null,"original":{"line":88,"column":0},"generated":{"line":1,"column":1686}},{"source":"components/CommentList.vue","name":null,"original":{"line":89,"column":0},"generated":{"line":1,"column":1687}},{"source":"components/CommentList.vue","name":null,"original":{"line":89,"column":0},"generated":{"line":1,"column":1692}},{"source":"components/CommentList.vue","name":null,"original":{"line":90,"column":0},"generated":{"line":1,"column":1694}},{"source":"components/CommentList.vue","name":null,"original":{"line":90,"column":0},"generated":{"line":1,"column":1702}},{"source":"components/CommentList.vue","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":1704}},{"source":"components/CommentList.vue","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":1709}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1712}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1719}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1728}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1730}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1733}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1737}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1739}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1741}},{"source":"components/CommentList.vue","name":null,"original":{"line":96,"column":0},"generated":{"line":1,"column":1746}},{"source":"components/CommentList.vue","name":null,"original":{"line":97,"column":0},"generated":{"line":1,"column":1761}},{"source":"components/CommentList.vue","name":null,"original":{"line":97,"column":0},"generated":{"line":1,"column":1765}},{"source":"components/CommentList.vue","name":null,"original":{"line":97,"column":0},"generated":{"line":1,"column":1767}},{"source":"components/CommentList.vue","name":null,"original":{"line":98,"column":0},"generated":{"line":1,"column":1771}},{"source":"components/CommentList.vue","name":null,"original":{"line":98,"column":0},"generated":{"line":1,"column":1773}},{"source":"components/CommentList.vue","name":null,"original":{"line":98,"column":0},"generated":{"line":1,"column":1785}},{"source":"components/CommentList.vue","name":null,"original":{"line":98,"column":0},"generated":{"line":1,"column":1793}},{"source":"components/CommentList.vue","name":null,"original":{"line":99,"column":0},"generated":{"line":1,"column":1794}},{"source":"components/CommentList.vue","name":null,"original":{"line":99,"column":0},"generated":{"line":1,"column":1799}},{"source":"components/CommentList.vue","name":null,"original":{"line":99,"column":0},"generated":{"line":1,"column":1801}},{"source":"components/CommentList.vue","name":null,"original":{"line":100,"column":0},"generated":{"line":1,"column":1806}},{"source":"components/CommentList.vue","name":null,"original":{"line":100,"column":0},"generated":{"line":1,"column":1814}},{"source":"components/CommentList.vue","name":null,"original":{"line":100,"column":0},"generated":{"line":1,"column":1816}},{"source":"components/CommentList.vue","name":null,"original":{"line":101,"column":0},"generated":{"line":1,"column":1824}},{"source":"components/CommentList.vue","name":null,"original":{"line":101,"column":0},"generated":{"line":1,"column":1834}},{"source":"components/CommentList.vue","name":null,"original":{"line":101,"column":0},"generated":{"line":1,"column":1836}},{"source":"components/CommentList.vue","name":null,"original":{"line":107,"column":0},"generated":{"line":1,"column":1849}},{"source":"components/CommentList.vue","name":null,"original":{"line":107,"column":0},"generated":{"line":1,"column":1868}},{"source":"components/CommentList.vue","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":1869}},{"source":"components/CommentList.vue","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":1880}},{"source":"components/CommentList.vue","name":null,"original":{"line":109,"column":0},"generated":{"line":1,"column":1891}},{"source":"components/CommentList.vue","name":null,"original":{"line":109,"column":0},"generated":{"line":1,"column":1905}},{"source":"components/CommentList.vue","name":null,"original":{"line":110,"column":0},"generated":{"line":1,"column":1906}},{"source":"components/CommentList.vue","name":null,"original":{"line":110,"column":0},"generated":{"line":1,"column":1917}},{"source":"components/CommentList.vue","name":null,"original":{"line":111,"column":0},"generated":{"line":1,"column":1927}},{"source":"components/CommentList.vue","name":null,"original":{"line":111,"column":0},"generated":{"line":1,"column":1931}},{"source":"components/CommentList.vue","name":null,"original":{"line":112,"column":0},"generated":{"line":1,"column":1933}},{"source":"components/CommentList.vue","name":null,"original":{"line":112,"column":0},"generated":{"line":1,"column":1938}},{"source":"components/CommentList.vue","name":null,"original":{"line":113,"column":0},"generated":{"line":1,"column":1940}},{"source":"components/CommentList.vue","name":null,"original":{"line":113,"column":0},"generated":{"line":1,"column":1948}},{"source":"components/CommentList.vue","name":null,"original":{"line":114,"column":0},"generated":{"line":1,"column":1950}},{"source":"components/CommentList.vue","name":null,"original":{"line":114,"column":0},"generated":{"line":1,"column":1960}},{"source":"components/CommentList.vue","name":null,"original":{"line":117,"column":0},"generated":{"line":1,"column":1966}},{"source":"components/CommentList.vue","name":null,"original":{"line":117,"column":0},"generated":{"line":1,"column":1971}},{"source":"components/CommentList.vue","name":null,"original":{"line":117,"column":0},"generated":{"line":1,"column":1980}},{"source":"components/CommentList.vue","name":null,"original":{"line":119,"column":0},"generated":{"line":1,"column":1983}},{"source":"components/CommentList.vue","name":null,"original":{"line":119,"column":0},"generated":{"line":1,"column":1991}},{"source":"components/CommentList.vue","name":null,"original":{"line":119,"column":0},"generated":{"line":1,"column":1995}},{"source":"components/CommentList.vue","name":null,"original":{"line":120,"column":0},"generated":{"line":1,"column":2000}},{"source":"components/CommentList.vue","name":null,"original":{"line":120,"column":0},"generated":{"line":1,"column":2006}},{"source":"components/CommentList.vue","name":null,"original":{"line":120,"column":0},"generated":{"line":1,"column":2015}},{"source":"components/CommentList.vue","name":null,"original":{"line":122,"column":0},"generated":{"line":1,"column":2018}},{"source":"components/CommentList.vue","name":null,"original":{"line":122,"column":0},"generated":{"line":1,"column":2026}},{"source":"components/CommentList.vue","name":null,"original":{"line":122,"column":0},"generated":{"line":1,"column":2032}},{"source":"components/CommentList.vue","name":null,"original":{"line":124,"column":0},"generated":{"line":1,"column":2035}},{"source":"components/CommentList.vue","name":null,"original":{"line":124,"column":0},"generated":{"line":1,"column":2037}},{"source":"components/CommentList.vue","name":null,"original":{"line":124,"column":0},"generated":{"line":1,"column":2042}},{"source":"components/CommentList.vue","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":2044}},{"source":"components/CommentList.vue","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":2046}},{"source":"components/CommentList.vue","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":2054}},{"source":"components/CommentList.vue","name":null,"original":{"line":126,"column":0},"generated":{"line":1,"column":2056}},{"source":"components/CommentList.vue","name":null,"original":{"line":126,"column":0},"generated":{"line":1,"column":2058}},{"source":"components/CommentList.vue","name":null,"original":{"line":126,"column":0},"generated":{"line":1,"column":2070}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":2084}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":2092}},{"source":"components/CommentList.vue","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":2100}}],"sources":{"components/CommentList.vue":"<template>\r\n    <div class=\"comment-list container\">\r\n        <p>Leave a comment:</p>\r\n        <form @submit.prevent=\"addComment\">\r\n            <label for=\"comment-name\">Name</label>\r\n            <input v-model=\"name\" id=\"comment-name\" type=\"text\" placeholder=\"Name\">\r\n\r\n            <label for=\"comment-message\">Message</label>\r\n            <textarea v-model=\"message\" name=\"message\" id=\"comment-message\" cols=\"30\" rows=\"10\" placeholder=\"Message\"></textarea>\r\n            <p v-if=\"error\">Please enter your name and message</p>\r\n            <vue-recaptcha class=\"recaptcha\" @verify=\"human = true\" sitekey=\"6LeMHNcZAAAAALVnQ5cakOMslTFB-0phmVAAQg-9\"></vue-recaptcha>\r\n            <input class=\"btn\" type=\"submit\" value=\"Add Comment\">\r\n        </form>\r\n        <ul>\r\n            <li class=\"comment\" v-for=\"comment in allComments\">\r\n                <p class=\"comment-name\">{{comment.name}}</p>\r\n                <date class=\"comment-date\" :date=\"comment.createdAt\"></date>\r\n                <p>{{comment.message}}</p>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport VueRecaptcha from 'vue-recaptcha';\r\nimport Date from \"~/components/Date\"\r\nimport gql from 'graphql-tag'\r\n\r\nexport default {\r\n    components: { Date, VueRecaptcha },\r\n    data(){\r\n        return {\r\n            newComments: [],\r\n            name: \"\",\r\n            message: \"\",\r\n            error: false,\r\n            human: false,\r\n        }\r\n    },\r\n    props: [ \"slug\" ],\r\n    computed: {\r\n        allComments(){\r\n            return (this.comments) ? this.newComments.concat(this.comments) : this.newComments\r\n        }\r\n    },\r\n    apollo: {\r\n        comments: {\r\n            query: gql`query ($slug: String!){\r\n                comments(orderBy: createdAt_DESC, where: {post: {slug: $slug}}, stage: DRAFT) {\r\n                    message\r\n                    name\r\n                    createdAt\r\n                },            \r\n            }`,\r\n            variables() {\r\n                return {\r\n                    slug: this.slug\r\n                }                \r\n            }\r\n        }\r\n        \r\n    },\r\n    methods: {\r\n        \r\n        addComment(){\r\n            this.error = !this.name || !this.message\r\n\r\n            if(this.error || !this.human) return\r\n\r\n            const newName = this.name\r\n            const newMessage = this.message\r\n            const newDate = new window.Date().toISOString()\r\n            const slug = this.slug\r\n            this.name = ''\r\n            this.message = ''\r\n\r\n            this.$apollo.mutate({\r\n                // Query\r\n                mutation: gql`mutation ($name: String!, $message: String!, $slug: String!) {\r\n                    createComment(data: {message: $message, name: $name, post: {connect: {slug: $slug}}}) {\r\n                        id\r\n                        name\r\n                        message\r\n                        createdAt\r\n                    }\r\n                }`,\r\n                // Parameters\r\n                variables: {\r\n                    name: newName,\r\n                    message: newMessage,\r\n                    slug: slug\r\n                },\r\n                // Update the cache with the result\r\n                // The query will be updated with the optimistic response\r\n                // and then with the real result of the mutation\r\n                update: (store, { data: { createComment } }) => {\r\n                    if(createComment.id !== -1) return\r\n                    this.newComments.unshift({\r\n                        name: createComment.name,\r\n                        message: createComment.message,\r\n                        createdAt: createComment.createdAt\r\n                    })\r\n                },\r\n                // Optimistic UI\r\n                // Will be treated as a 'fake' result as soon as the request is made\r\n                // so that the UI can react quickly and the user be happy\r\n                optimisticResponse: {\r\n                    __typename: 'Mutation',\r\n                    createComment: {\r\n                        __typename: 'Comment',\r\n                        id: -1,\r\n                        name: newName,\r\n                        message: newMessage,\r\n                        createdAt: newDate\r\n                    },\r\n                },\r\n            }).then((data) => {\r\n                // Result\r\n                console.log(data)\r\n            }).catch((error) => {\r\n                // Error\r\n                console.error(error)\r\n                // We restore the initial user input\r\n                this.name = newName\r\n                this.message = newMessage\r\n                this.newComments.shift()\r\n            })\r\n        }\r\n    }\r\n    \r\n}\r\n</script>"},"lineCount":null}},"error":null,"hash":"f1e9d27b4cfcae53d2e3e6a885e48834","cacheData":{"env":{}}}